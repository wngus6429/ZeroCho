{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{RNiq:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return O}));var c=n(\"nKUr\"),i=n(\"q1tI\"),r=n(\"1zst\"),a=n(\"/MKj\"),o=n(\"kduo\"),l=n(\"ODXe\"),s=n(\"Vl3Y\"),u=n(\"5rEg\"),d=n(\"2/Rp\"),j=n(\"p+NB\"),f=n(\"HlrF\"),b=n(\"OcYQ\"),p=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.post})),n=t.imagePaths,r=(t.addPostLoading,t.addPostDone),o=Object(f.a)(\"\"),p=Object(l.a)(o,3),O=p[0],m=p[1],h=p[2];Object(i.useEffect)((function(){r&&h(\"\")}),[r]);var g=Object(i.useCallback)((function(){if(!O||!O.trim())return alert(\"\\u6295\\u7a3f\\u3092\\u4f5c\\u6210\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u3002\");var t=new FormData;return n.forEach((function(e){t.append(\"image\",e)})),t.append(\"content\",O),e({type:j.e,data:t})}),[O,n]),v=Object(i.useRef)(),w=Object(i.useCallback)((function(){v.current.click()}),[v.current]),x=Object(i.useCallback)((function(t){console.log(\"images\",t.target.files);var n=new FormData;[].forEach.call(t.target.files,(function(e){n.append(\"image\",e)})),e({type:j.G,data:n})}),[]),E=Object(i.useCallback)((function(t){return function(){e({type:j.v,data:t})}}));return Object(c.jsxs)(s.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:g,children:[Object(c.jsx)(u.a.TextArea,{value:O,onChange:m,maxLength:140,placeholder:\"\\u3069\\u3093\\u306a\\u4e8b\\u4ef6\\u304c\\u3042\\u308a\\u307e\\u3057\\u305f\\u304b\\u3002\"}),Object(c.jsxs)(\"div\",{children:[Object(c.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:v,onChange:x}),Object(c.jsx)(d.a,{onClick:w,children:\"\\u30a4\\u30e1\\u30fc\\u30b8\\u30a2\\u30c3\\u30d7\\u30ed\\u30fc\\u30c9\"}),Object(c.jsx)(d.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",children:\"\\u6295\\u7a3f\"})]}),Object(c.jsx)(\"div\",{children:n.map((function(e,t){return Object(c.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(c.jsx)(\"img\",{src:\"\".concat(b.a,\"/\").concat(e),style:{width:\"200px\"},alt:e}),Object(c.jsx)(\"div\",{children:Object(c.jsx)(d.a,{onClick:E(t),children:\"\\u524a\\u9664\"})})]},e)}))})]})},O=!0;t.default=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e.user})).me,n=Object(a.c)((function(e){return e.post})),l=n.mainPosts,s=n.hasMorePosts,u=n.loadPostsLoading,d=n.retweetError;return Object(i.useEffect)((function(){d&&alert(d)}),[d]),Object(i.useEffect)((function(){function t(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&s&&!u){var t,n=null===(t=l[l.length-1])||void 0===t?void 0:t.id;e({type:j.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[s,u]),Object(c.jsxs)(r.a,{children:[t&&Object(c.jsx)(p,{}),l.map((function(e){return Object(c.jsx)(o.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,3,7,0,4,5,6,8]]]);","map":{"version":3,"sources":["static/chunks/pages/index-ec27d79737f65f99fab1.js"],"names":["_N_E","window","push","RNiq","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","jsx_runtime","react","AppLayout","es","PostCard","slicedToArray","es_form","input","es_button","reducers_post","useinput","config","components_PostForm","dispatch","Object","_useSelector","state","post","imagePaths","addPostDone","addPostLoading","_useinput","_useinput2","text","onChangeText","setText","onSubmit","trim","alert","formData","FormData","forEach","p","append","type","data","imageInput","onClickImageUpload","current","click","onChangeImages","e","console","log","target","files","imageFormData","call","f","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","map","v","i","display","src","concat","width","alt","me","user","_useSelector2","mainPosts","hasMorePosts","loadPostsLoading","retweetError","onScroll","scrollY","document","documentElement","clientHeight","scrollHeight","_mainPosts","lastId","length","id","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"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"},"extractedComments":[]}